<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button default-href="menu"></ion-back-button>
    </ion-buttons>
    <ion-title>Choose your plates</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="linkPlateListToDate()" id="open-toast">Save</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content [fullscreen]="true">
  <ion-segment (ionChange)="onSegmentChange($event)" value="all">
    <ion-segment-button value="all">
      <ion-label>All</ion-label>
    </ion-segment-button>
    <ion-segment-button value="breakfast">
      <ion-label>Breakfast</ion-label>
    </ion-segment-button>
    <ion-segment-button value="lunch">
      <ion-label>Lunch</ion-label>
    </ion-segment-button>
    <ion-segment-button value="dinner">
      <ion-label>Dinner</ion-label>
    </ion-segment-button>
  </ion-segment>

  <ion-list>
    <ion-item *ngFor="let plate of filteredPlateList">
      <ion-checkbox
        [checked]="plate.isSelected"
        (ionChange)="togglePlateSelection(plate)"
        justify="start"
        labelPlacement="end">
        {{ plate.label }}
      </ion-checkbox>
      <ion-button fill="clear" [routerLink]="['plate-details-page',plate.id]" slot="end">
        details
      </ion-button>
      <!-- Meal type selection for selected plates -->
      <ion-select
        *ngIf="plate.isSelected"
        [(ngModel)]="plate.selectedMealType"
        placeholder="Select meal type"
        (ionChange)="updatePlateMealType(plate)">
        <ion-select-option value="breakfast">Breakfast</ion-select-option>
        <ion-select-option value="lunch">Lunch</ion-select-option>
        <ion-select-option value="dinner">Dinner</ion-select-option>
      </ion-select>
    </ion-item>
  </ion-list>

  <ion-fab (click)="presentCreatePlateModal()" horizontal="end" slot="fixed" vertical="bottom">
    <ion-fab-button>
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <ion-toast [duration]="2000"
             message="Your week list is saved!"
             trigger="open-toast">
  </ion-toast>
</ion-content>
